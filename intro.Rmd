---
layout: default
title: Welcome
output: bookdown::html_chapter
---
  
# Welcome
  
## Overview

The goal of "Archaeological Science with R" is to give you a solid foundation into using R to do archaeological science. By archaeological science, I mean, systematic, objective, and empirical research into past human behaviours using material remains and traces. The goal is not to be exhaustive, but to instead focus on what I think are the critical skills for doing  archaeological science with R. Some archaeologists already use R in an _ad hoc_ way, for a quick plot here, or a linear model there. But this book will show you how R can be at the center of your entire research workflow, from when you start working with raw data until your final thesis, report, or manuscript is complete.

## Why do archaeologists need to learn to code?

This book aims to solve a specific problem. The problem is that the majority of archaeologists receive little or no training in scientific programming for data analysis and visualization, and yet they routinely analyse and visualise data. A command-line interface program such as R is ideal for this kind of work, and yet is unfamiliar and exotic to most archaeologists. A command-line interface refers to interacting with software by sending instructions to the program as lines of plain text. Instead, most archaeologists use Microsoft Excel, SPSS, or similar commercial point-and-click software. There are four problems with this. 

1. It usually results in a lot of time-consuming repetition, like copying-and-pasting between sheets in Excel, and between Excel and Microsoft Word. In recent years, biologists have seen great increases in volumes of genomic data, due to improvements in sequencing technology. This has lead them to search for more efficient ways to analyse their data, and automate their analyses. They found that spreadsheet programs did not provide enough flexibility to conduct their analyses. As a result, many have turned to R, Python, and similar programming languages to overcome the limitations and inefficiencies of Excel. The key detail here is a shift from the point-and-click interface of a spreadsheet program, to a command-line interface of a programming language.    

2. It limits the development of new methods because the you are limited to what's available in the commercial software. With most commercial software packages, you are limited to the suite of functions they choose to make available to you. With an open source programming language, you and anyone else are free to implement new methods. R has extensive functions for data analysis. This includes features likes missing values and subsetting. But more importantly, R has a large set of packages (currently >6000) for quantitative analysis, visualisation, and importing and manipulating data. Whatever analysis or graphic you're trying to do, chances are that someone has already tried it, and made the code available in an R package. R is also the lingua franca for researchers in statistics, who will often publish an R package to accompany their articles. This often means immediate access to the very latest statistical techniques and implementations.    

3. Commercial software also makes it difficult to demonstrate and ensure reproducibility due to the ephemeral nature of point-and-click interfaces. Point-and-click interfaces are familiar and easy to use for most people because they are very common in software programs. But it's very challenging to efficiently record a sequence of complex clicks so that another person (or you in the future) can unambiguously repeat the procedure. This means it's difficult to make your analyses reproducible if all your work is done with a mouse. It's not practical to completely abandon using a mouse when using a computer, but by using a command-line program such as R, we can record the most important steps of the analysis workflow in code. Then we have an unambiguous record of the steps in our analysis that we can easily share with others, and re-use ourselves, months or years into the future

4. Commercial software limit transparency in research because the algorithms behind the functions are not available for convenient inspection and modification. Staticians have long noted that Excel has flawed statistical procedures [@mccullough2008accuracy, @yalta2008accuracy], and introductory texts on statistics warn students not to use Excel when the results matter [eg. @keller2000applied]. With an open source program such as R, you can easily inspect and alter the algorithms behind every operation. 

Using a command-line program will go a long way towards solving these four problems.

This book is complimentary to the major textbooks and handbooks of quantitative archaeology (Baxter 2003; 1994, Van Pool and Leonard 2011, Drennan 2009, Shennan 1997). These are excellent for relevant statistical theory, discussion, and examples, but have three limitations that we will address in the following chapters.

1. First is the absence of 'plug-and-play' examples, leading the reader to invest substantial effort to implement a method described using formulae, creating many opportunities for error. Van Pool and Leonard 2011 instruct the reader to do their statistical analyses by hand, an impractical and outmoded recommendation. The amount of effort required by these texts is prohibitive to exploration and experimentation of new methods. This book includes reproducible examples using real data sets so you can easily step-through the analysis to explore different parameters, and easily interchange your own data.    

2. he existing books give little coverage to intuitive and methodologically more robust methods such as resampling and Bayesian analyses, favoring traditional parametric methods. This reflects a time when computational power was scarce, and computations often done by hand or with a calculator (cf Fletcher and Lock 1991). Modern computers can now easily handle as resampling and Bayesian methods, and R is unique in having a mature set of methods for computing common tests in these frameworks. These methods are also increasingly common in the published research literature. This book introduces these alternative approaches to give you more options in your analytical toolkit.    

3. The currently available books are silent on the practical mechanics of many common data analysis and visualization tasks in archaeology that are not traditionally considered statistics, such as displaying and analyzing stratigraphic information from excavation and spatial data from surveys. Learning a tool-chain for these tasks is traditionally done on your own, and often at great expense with proprietary software. This book demonstrates how to write simple programs that are especially useful for archaeologists. By doing this, and providing code for other common tasks, this book addresses the need for instruction in a comprehensive open source tool-chain for these common tasks in archaeological science. It does this by presenting a reproducible research environment to show how R and its contributed packages can be used for start-to-finish research into survey, excavation, and laboratory data. 

My hope is that practical and accessible introduction to reproducible research, such as this book aims to provide, will improve openness and transparency in archaeology generally. 

This is not a book of detailed discussions of statistical theory, and you will be referred to other texts on technical details of algorithms, etc. This is a book introducing R for practical and efficient implementations of common tasks in archaeological science, and serves as a springboard to more advanced R programming. The specific topics covered in this book are: 

* Implementing reproducible research as a practice that is good for science generally, and good for your individual productivity 

* Working with common archaeological data structures, ingesting them into R and manipulating them from messy formats to tidy formats ready for analysis

* Visualising spatial data by making maps, doing spatial analysis and site classification 

* Visualising and analysing stratigraphic data from archaeological excavation

* Working with relative and absolute chronologies by doing seriation, and calibrating, analysing and visualising radiocarbon dates 

* Key methods for working with stone artefacts, faunal remains, pottery, glass, and metal artefacts 

* Compositional analysis using cluster and principle components analyses of multivariate data 

* Simplifying collaborative research with version control 

* Writing for publication more transparently and efficiently with literate programming

 

## Why R?

If you are new to R, you might wonder what the appeal is, especially when there are so many programming languages in common use. Some of the characteristics that drew me to learn R include:

* It's free, open source, and available on every major type of computer. As a result, if you do your analysis in R, anyone can easily replicate it.

* An active and supportive community. It is easy to get help from experts on the R-help mailing list, Stack Overflow, or subject-specific mailing lists. You can also connect with other R learners via twitter, linkedin, and through many local user groups. Package authors are often pleased to see their packages used by others, and willing to answer questions about your use of their package. 

* Flexible tools for communicating your results. R packages make it easy to produce html, pdf, or Microsoft Word documents that include text, tables and figures, all generated from R code. 

## Who should read this book

This book is written for archaeologists who are keen to expand their analytical horizons and gain access to new methods and new, more efficient, ways of organising their research process.  No prior knowledge about R or computer programming is necessary, but a curiosity about statistics would be an advantage, as well as a readiness to read beyond this book to make decisions about the suitability of statistical methods for your specific research questions. 

## Prerequisites

To run the code in this book, you will need to have R installed on your computer, as well as the RStudio IDE, an application that makes it easier to use R. Both R and the RStudio IDE are free and easy to install.

### R

To install R, visit [cran.r-project.org](http://cran.r-project.org). Then click the link that matches your operating system. What you do next will depend on your operating system.

* Mac users should click the most current release. This will be the `.pkg` file at the top of the page. Once the file is downloaded, double click it to open an R installer. Follow the directions in the installer to install R.

* Windows users should click "base" and then download the most current version of R, which will be linked at the top of the page.

* Linux users will need to select their distribution and then follow the distribution specific instructions to install R. [cran.r-project.org](https://cran.r-project.org/bin/linux/) includes these instructions along side of the files to download.


### RStudio

Once you have R installed, it is time to download RStudio. To download RStudio, visit [www.rstudio.com/download](http://www.rstudio.com/download). 

Choose the installer for your system. Then click the link to download the application. Once you have the application, installation is easy. Once RStudio is installed, open it as you would open any other application.


## Key terms to understand

Now we've established the basic motivation for learning R to do archaeology, we should introduce some key terms and conventions that appear frequently in this book. Becoming familiar with these terms will help you with the basic tasks of finding your way around when starting to use R.

The `command line` refers to the location on your screen where you type, paste, or send code. At the left side of the command line is a `prompt`, which looks like this: `>` and has a blinking curser next to it. The prompt is found in the R `console`, which is the name of the window on your desktop where you enter code and receive output. `Code` refers to anything written in a programming language, from a single function to thousands of lines. Code often contains `comments`, which you can recognise by a `#` symbol at the start of the line. Code comments are to help you understand the purpose of the code. The `#` symbol tells R to ignore that line, and skip to the next line of code. A `script` is a file that contains code, and usually R script file names ends with `.R`. 

A `function` refers to the smallest group of code that carries out instructions to do useful work. For example, the function `mean()` computes the mean of a set of numbers. In this book you will always be able to recognise a function because they will always be followed by parenthesis. A function is a handy way to organise code, because a single function can cause hundreds of lines of code to run to produce a result. Rather than running those hundreds of lines, one-by-one, over and over, we can simply run the function that invokes them, and save ourself a lot of typing. Usually we want to keep the output of a function so we can use in other functions, or for plotting. For example, we might want to compare the means lengths of two assemblages of artefacts. To keep the results of function, we `assign` the output to an `object`. Here, we assign the output of the `mean()` function to an object that we arbitrarily call `x`: `x <- mean(c(4, 7, 12))`. This short piece of code computes the mean value of 4, 7, and 12, (the `c` is a function to combine a set of numbers) and then assigns, or stores, it in a object called `x` (we do not need to create `x` in advance). We can then use `x` later in our workflow for other tasks, rather than recomputing the mean repeatedly. 

Functions are at the heart of working with R, and are part of the reason for R's great versatility. They save a lot of copy-and-pasting and time typing, so it's worth to invest some effort into learning how to write your own functions. Functions are typically organised into `packages`, which you can download to extend the usefulness of R. We will use packages extensively in this book, and briefly discuss how and why you might write your own packages. There are two common methods to install packages for R. For either method you need an internet connection, an R session (by opening RStudio), and to run a command at the command line.

The most common way to install R packages is to download them from the package repository at [cran.r-project.org](http://cran.r-project.org). To do this run the command, `install.packages()` as you see in the example below. R will download the packages from [cran.r-project.org](http://cran.r-project.org) and install them in your system library.

Try this yourself by opening R and running these commands:

```{r eval = FALSE, tidy = FALSE}
# install a single package
install.packages("devtools")
# install multiple packages at one time
install.packages(c("dplyr", "ggplot2", 
                   "knitr", "readr", "rmarkdown", 
                   "scales", "stringr", "tidyr"))
```

Most of the packages we will use in this book are stored on [cran.r-project.org](http://cran.r-project.org), but are other online repositories for R packages. For example, many R package authors use [www.github.com](http://www.github.com) to make their packages publicly available. 

You can install packages stored on github with the `install_github()` function in the `devtools` package (which we installed using the commands above). To use the `install_github()` function, pass it a character string with the form `"<github username>/<github repository name>"`. For example, we can install the package `ggbiplot` to plot the output of a Principle Components Analysis like this: 

```{r eval = FALSE}
devtools::install_github("vqv/ggbiplot")
```

When R installs a package, it downloads the package to your system `library`. You must use the `library()` function to make the contents of the package available to your current R session. It's good practice to have the `library()` functions among the first few lines of your code, so other users can quickly see what packages they will need to download to prepare to run your code. For example, to use the functions in the `dplyr` package, you would need to first run

```{r eval = FALSE}
library("dplyr")
```

You will need to rerun this `library()` command each time you open a new R session that uses functions from the `dplyr` package. 

## Getting help

Developing fluency in a language like German or Chinese takes time and has ups and downs. Learning R is a similar process, and you should anticipate ups and downs as R becomes an increasingly central part of your workflow. Fortunately, there are a number of options for seeking help when you get stuck, or have a question. The simplest case is when you execute a line of code, only to get a cryptic error message in reply. Your first action might be to copy the text of the error message to your clipboard, and paste it into Google. In most cases, the top search results will be from [Stack Overflow]( http://stackoverflow.com/) or one of the [R mailing lists](https://www.r-project.org/mail.html). 

Stack Overflow is a free question-and-answer website that is focused on computer programming. Participants receive points for asking clear questions, and for giving useful answers. This adds a competitive element to participating in the Q&A, and sometimes when you ask a well-formed question, several answers will appear very quickly from participants eager to earn points. The R mailing lists are more traditional email-based fora, with archives at several places online. Highly skilled R programmers and R-using scientists from a variety of disciplines are active on both the R mailing lists and Stack Overflow. I tend to prefer Stack Overflow because I find it easier to see when a question has been answered, compared to browsing the email list archives. 

I have found that in the course of writing my question to submit to Stack Overflow, the process of simplifying my code into a small, self-contained example leads me to discover the cause of my problem (often a misplaced comma or bracket) and I can answer my question before I need help from others. Similarly, I often find that many of my questions have already been asked and answered on Stack Overflow - the challenge is to recognise how similar an existing question is to your current problem, and thus how useful the answers are to your specific issue. 

If you are sure that your problem is new and unique, and you want to submit a question, here is some general advice to help you get a useful answer quickly from the Stack Overflow and R mailing lists communities:

* Spend some time browsing previous posts to understand the community norms. Online communities have specific cultural values, and while some of these are spelled out in posting guides, many are also unwritten, and can only be learnt through mindful reading of previous correspondence. If you are familiar with the norms, you are more likely to have an efficient and satisfying interaction with the community.  

* Make sure you have the latest version of R and of the package (or packages) you are having problems with. It may be that your problem is the result of a recently fixed bug.

* Spend some time creating a reproducible example. This mean a simplified version of your problem that another person can copy and paste from their browser into their R console to reproduce the error that you see. This can be quite an art-form, but the basic ingredients for a good reproducible example are: the packages you are using, a small data set, code, and a description of your R environment. R comes with many example data sets built-in, if you run `data()` you can see a list, and these are very convenient to use for reproducible examples. If you want to include your own data, you can use `dput()` to generate R code that another person can copy and paste to recreate your data set. Your code should be easy to read, with spaces between operators (+, -, *, etc.) and after commas, and conformant to a style guide, such as Hadley Wickham's [guide in Advanced R](http://adv-r.had.co.nz/Style.html). Your code should includes lines of commentary, which begin with `#`, to help others understand your problem. The usual way to communicate your R environment (ie. your operating system type and version), is to include the output from `sessionInfo()` into your question. Don't worry if some of these terms are unfamiliar at the moment, the main thing to know here is that help is available, and that the quality of help you receive is proportional to the effort you spend seeking it. 



